import base64
code=b'CmltcG9ydCBweW1vbmdvCmltcG9ydCByYW5kb20KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKaW1wb3J0IHN5cwppbXBvcnQgZ2V0b3B0CmltcG9ydCBwcHJpbnQKCiMgQ29weXJpZ2h0IDIwMTIKIyAxMGdlbiwgSW5jLgojIEF1dGhvcjogQW5kcmV3IEVybGljaHNvbiAgIGFqZUAxMGdlbi5jb20KIwojIElmIHlvdSBhcmUgYSBzdHVkZW50IGFuZCByZWFkaW5nIHRoaXMgY29kZSwgdHVybiBiYWNrIG5vdywgYmVmb3JlCiMgdGhlIE1vbmdvREIgZ29kcyBzbWl0ZSB5b3UuCgpjb25uZWN0aW9uID0gTm9uZQpkYiA9IE5vbmUKd2ViaG9zdCA9ICJsb2NhbGhvc3Q6ODA4MiIKbW9uZ29zdHIgPSAibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNyIKZGJfbmFtZSA9ICJibG9nIgoKIyB0aGlzIHNjcmlwdCB3aWxsIGNoZWNrIHRoYXQgaG9tZXdvcmsgNC4zCgojIGNvbW1hbmQgbGluZSBhcmcgcGFyc2luZyB0byBtYWtlIGZvbGtzIGhhcHB5IHdobyB3YW50IHRvIHJ1biBhdCBtb25nb2xhYnMgb3IgbW9uZ29ocQojIHRoaXMgZnVuY3Rpb25zIHVzZXMgZ2xvYmFsIHZhcnMgdG8gY29tbXVuaWNhdGUuIGZvcmdpdmUgbWUuCmRlZiBhcmdfcGFyc2luZyhhcmd2KToKCiAgICBnbG9iYWwgd2ViaG9zdAogICAgZ2xvYmFsIG1vbmdvc3RyCiAgICBnbG9iYWwgZGJfbmFtZQoKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChhcmd2LCAiLXA6LW06LWQ6IikKICAgIGV4Y2VwdCBnZXRvcHQuR2V0b3B0RXJyb3I6CiAgICAgICAgcHJpbnQoInVzYWdlIHZhbGlkYXRlLnB5IC1wIHdlYmhvc3QgLW0gbW9uZ29Db25uZWN0U3RyaW5nIC1kIGRhdGFiYXNlTmFtZSIpCiAgICAgICAgcHJpbnQoIlx0bW9uZ29Db25uZWN0aW9uU3RyaW5nIGRlZmF1bHQgdG8gezB9Ii5mb3JtYXQobW9uZ29zdHIpKQogICAgICAgIHByaW50KCJcdGRhdGFiYXNlTmFtZSBkZWZhdWx0cyB0byB7MH0iLmZvcm1hdChkYl9uYW1lKSkKICAgICAgICBzeXMuZXhpdCgyKQogICAgZm9yIG9wdCwgYXJnIGluIG9wdHM6CiAgICAgICAgaWYgKG9wdCA9PSAnLWgnKToKICAgICAgICAgICAgcHJpbnQoInVzYWdlIHZhbGlkYXRlLnB5IC1tIG1vbmdvQ29ubmVjdFN0cmluZyAtZCBkYXRhYmFzZU5hbWUiKQogICAgICAgICAgICBzeXMuZXhpdCgyKQogICAgICAgIGVsaWYgb3B0IGluICgiLW0iKToKICAgICAgICAgICAgbW9uZ29zdHIgPSBhcmcKICAgICAgICAgICAgcHJpbnQoIk92ZXJyaWRpbmcgTW9uZ29EQiBjb25uZWN0aW9uIHN0cmluZyB0byBiZSAiLCBtb25nb3N0cikKICAgICAgICBlbGlmIG9wdCBpbiAoIi1kIik6CiAgICAgICAgICAgIGRiX25hbWUgPSBhcmcKICAgICAgICAgICAgcHJpbnQoIk92ZXJyaWRpbmcgTW9uZ29EQiBkYXRhYmFzZSB0byBiZSAiLCBkYl9uYW1lKQoKIyBjaGVjayB0byBzZWUgaWYgdGhleSBsb2FkZWQgdGhlIGRhdGEgc2V0CmRlZiBjaGVja19mb3JfZGF0YV9pbnRlZ3JpdHkoKToKCiAgICBwb3N0cyA9IGRiLnBvc3RzCiAgICB0cnk6CiAgICAgICAgY291bnQgPSBwb3N0cy5jb3VudCgpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IikKICAgICAgICByYWlzZQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGlmIChjb3VudCAhPSAxMDAwKToKICAgICAgICBwcmludCgiVGhlcmUgYXJlIHN1cHBvc2VkIHRvIGJlIDEwMDAgZG9jdW1lbnRzLiB5b3UgaGF2ZSAiLCBjb3VudCkKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAjIGZpbmQgdGhlIG1vc3QgcG9wdWxhciB0YWdzCiAgICB0cnk6CgogICAgICAgIHJlc3VsdCA9IGRiLnBvc3RzLmFnZ3JlZ2F0ZShbeyckcHJvamVjdCc6eyd0YWdzJzoxfX0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyckdW53aW5kJzonJHRhZ3MnfSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7JyRncm91cCc6eydfaWQnOiAnJHRhZ3MnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY291bnQnOnsnJHN1bSc6MX19fSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7JyRzb3J0Jzp7J2NvdW50JzotMX19LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnJGxpbWl0JzoxMH1dKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCJjYW4ndCBxdWVyeSBNb25nb0RCLi5pcyBpdCBydW5uaW5nPyIpCiAgICAgICAgcmFpc2UKICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAKICAgIGZvdW5kID0gRmFsc2UKICAgIGZvciBpdGVtIGluIHJlc3VsdDoKICAgICAgICBpZiAoaXRlbVsnY291bnQnXSA9PSAxMyBhbmQgCiAgICAgICAgICAgIGl0ZW1bJ19pZCddID09ICJzcGh5bngiKToKICAgICAgICAgICAgZm91bmQgPSBUcnVlCgogICAgaWYgbm90IGZvdW5kOgogICAgICAgIHByaW50KCJUaGUgZGF0YXNldCBpcyBub3QgcHJvcGVybHkgbG9hZGVkLiBUaGUgZGlzdHJpYnV0aW9uIG9mIHBvc3QgdGFncyBpcyB3cm9uZy4iKQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHByaW50KCJEYXRhIGxvb2tzIGxpa2UgaXQgaXMgcHJvcGVybHkgbG9hZGVkIGludG8gdGhlIHBvc3RzIGNvbGxlY3Rpb24iKQoKICAgIHJldHVybiBUcnVlCiAgICAKCmRlZiBjaGVja19mb3JfZmFzdF9ibG9nX2hvbWVfcGFnZSgpOgoKICAgIHBvc3RzID0gZGIucG9zdHMKCiAgICB0cnk6CiAgICAgICAgZXhwbGFpbiA9IHBvc3RzLmZpbmQoKS5zb3J0KCdkYXRlJywgZGlyZWN0aW9uPS0xKS5saW1pdCgxMCkuZXhwbGFpbigpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IikKICAgICAgICByYWlzZQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGlmIChleHBsYWluWydleGVjdXRpb25TdGF0cyddWyd0b3RhbERvY3NFeGFtaW5lZCddID4gMTApOgogICAgICAgIHByaW50KCJTb3JyeSwgZXhlY3V0aW5nIHRoZSBxdWVyeSB0byBkaXNwbGF5IHRoZSBob21lIHBhZ2UgaXMgdG9vIHNsb3cuICIpCiAgICAgICAgcHJpbnQoIldlIHNob3VsZCBiZSBzY2FubmluZyBubyBtb3JlIHRoYW4gMTAgZG9jdW1lbnRzLiBZb3Ugc2Nhbm5lZCIsIGV4cGxhaW5bJ2V4ZWN1dGlvblN0YXRzJ11bJ3RvdGFsRG9jc0V4YW1pbmVkJ10pCiAgICAgICAgcHJpbnQoImhlcmUgaXMgdGhlIG91dHB1dCBmcm9tIGV4cGxhaW4iKQoKICAgICAgICBwcCA9IHBwcmludC5QcmV0dHlQcmludGVyKGRlcHRoPTYpCiAgICAgICAgcHAucHByaW50KGV4cGxhaW4pCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHByaW50KCJIb21lIHBhZ2UgaXMgc3VwZXIgZmFzdC4gTmljZSBqb2IuXG4iKQogICAgcmV0dXJuIFRydWUKCmRlZiBnZXRfdGhlX21pZGRsZV9wZXJtYWxpbmsoKToKICAgIHBvc3RzID0gZGIucG9zdHMKICAgIHRyeToKICAgICAgICBjID0gcG9zdHMuZmluZCgpLnNraXAoNTAwKS5saW1pdCgxKQogICAgICAgIGZvciBkb2MgaW4gYzoKICAgICAgICAgICAgcGVybWFsaW5rID0gZG9jWydwZXJtYWxpbmsnXQogICAgICAgICAgICByZXR1cm4gcGVybWFsaW5rCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IikKICAgICAgICByYWlzZQogICAgcmV0dXJuICIiCgpkZWYgY2hlY2tfZm9yX2Zhc3RfYmxvZ19lbnRyeV9wYWdlKCk6CiAgICAKICAgIHBvc3RzID0gZGIucG9zdHMKCiAgICBwZXJtYWxpbmsgPSBnZXRfdGhlX21pZGRsZV9wZXJtYWxpbmsoKQogICAgdHJ5OgogICAgICAgIGV4cGxhaW4gPSBwb3N0cy5maW5kKHsncGVybWFsaW5rJzpwZXJtYWxpbmt9KS5leHBsYWluKCkKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCgiY2FuJ3QgcXVlcnkgTW9uZ29EQi4uaXMgaXQgcnVubmluZz8iKQogICAgICAgIHJhaXNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgKGV4cGxhaW5bJ2V4ZWN1dGlvblN0YXRzJ11bJ3RvdGFsRG9jc0V4YW1pbmVkJ10gPiAxKToKICAgICAgICBwcmludCgiU29ycnksIGV4ZWN1dGluZyB0aGUgcXVlcnkgdG8gcmV0cmlldmUgYSBwb3N0IGJ5IHBlcm1hbGluayBpcyB0b28gc2xvdyAiKQogICAgICAgIHByaW50KCJXZSBzaG91bGQgYmUgc2Nhbm5pbmcgbm8gbW9yZSB0aGFuIDEgZG9jdW1lbnRzLiBZb3Ugc2Nhbm5lZCIsIGV4cGxhaW5bJ2V4ZWN1dGlvblN0YXRzJ11bJ3RvdGFsRG9jc0V4YW1pbmVkJ10pCiAgICAgICAgcHJpbnQoImhlcmUgaXMgdGhlIG91dHB1dCBmcm9tIGV4cGxhaW4iKQoKICAgICAgICBwcCA9IHBwcmludC5QcmV0dHlQcmludGVyKGRlcHRoPTYpCiAgICAgICAgcHAucHByaW50KGV4cGxhaW4pCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHByaW50KCJCbG9nIHJldHJpZXZhbCBieSBwZXJtYWxpbmsgaXMgc3VwZXIgZmFzdC4gTmljZSBqb2IuXG4iKQogICAgcmV0dXJuIFRydWUKCgpkZWYgY2hlY2tfZm9yX2Zhc3RfcG9zdHNfYnlfdGFnX3BhZ2UoKToKICAgIHBvc3RzID0gZGIucG9zdHMKCiAgICB0YWcgPSAic3BoeW54IgogICAgdHJ5OgogICAgICAgIGV4cGxhaW4gPSBwb3N0cy5maW5kKHsndGFncyc6dGFnfSkuc29ydCgnZGF0ZScsIGRpcmVjdGlvbj0tMSkubGltaXQoMTApLmV4cGxhaW4oKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCJjYW4ndCBxdWVyeSBNb25nb0RCLi5pcyBpdCBydW5uaW5nPyIpCiAgICAgICAgcmFpc2UKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBpZiAoZXhwbGFpblsnZXhlY3V0aW9uU3RhdHMnXVsndG90YWxEb2NzRXhhbWluZWQnXSA+IDEwKToKICAgICAgICBwcmludCgiU29ycnksIGV4ZWN1dGluZyB0aGUgcXVlcnkgdG8gcmV0cmlldmUgcG9zdHMgYnkgdGFnIGlzIHRvbyBzbG93LiIpCiAgICAgICAgcHJpbnQoIldlIHNob3VsZCBiZSBzY2FubmluZyBubyBtb3JlIHRoYW4gMTAgZG9jdW1lbnRzLiBZb3Ugc2Nhbm5lZCIsIGV4cGxhaW5bJ2V4ZWN1dGlvblN0YXRzJ11bJ3RvdGFsRG9jc0V4YW1pbmVkJ10pCiAgICAgICAgcHJpbnQoImhlcmUgaXMgdGhlIG91dHB1dCBmcm9tIGV4cGxhaW4iKQoKICAgICAgICBwcCA9IHBwcmludC5QcmV0dHlQcmludGVyKGRlcHRoPTYpCiAgICAgICAgcHAucHByaW50KGV4cGxhaW4pCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHByaW50KCJCbG9nIHJldHJpZXZhbCBieSB0YWcgaXMgc3VwZXIgZmFzdC4gTmljZSBqb2IuXG4iKQogICAgcmV0dXJuIFRydWUKCgojIG1haW4gc2VjdGlvbiBvZiB0aGUgY29kZQpkZWYgbWFpbihhcmd2KToKICAgICAgICAgICAgCiAgICBhcmdfcGFyc2luZyhhcmd2KQogICAgZ2xvYmFsIGNvbm5lY3Rpb24KICAgIGdsb2JhbCBkYgoKICAgIHByaW50KCJXZWxjb21lIHRvIHRoZSBIVyA0LjMgQ2hlY2tlci4gTXkgam9iIGlzIHRvIG1ha2Ugc3VyZSB5b3UgYWRkZWQgdGhlIGluZGV4ZXMiKQogICAgcHJpbnQoInRoYXQgbWFrZSB0aGUgYmxvZyBmYXN0IGluIHRoZSBmb2xsb3dpbmcgdGhyZWUgc2l0dWF0aW9ucyIpCiAgICBwcmludCgiXHRXaGVuIHNob3dpbmcgdGhlIGhvbWUgcGFnZSIpCiAgICBwcmludCgiXHRXaGVuIGZldGNoaW5nIGEgcGFydGljdWxhciBwb3N0IikKICAgIHByaW50KCJcdFdoZW4gc2hvd2luZyBhbGwgcG9zdHMgZm9yIGEgcGFydGljdWxhciB0YWciKQoKICAgICMgY29ubmVjdCB0byB0aGUgZGIgKG1vbmdvc3RyIHdhcyBzZXQgaW4gYXJnX3BhcnNpbmcpCiAgICB0cnk6CiAgICAgICAgY29ubmVjdGlvbiA9IHB5bW9uZ28uTW9uZ29DbGllbnQobW9uZ29zdHIpCiAgICAgICAgZGIgPSBjb25uZWN0aW9uW2RiX25hbWVdCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoImNhbid0IGNvbm5lY3QgdG8gTW9uZ29EQiB1c2luZyIsIG1vbmdvc3RyLCAiLiBJcyBpdCBydW5uaW5nPyIpCiAgICAgICAgcHJpbnQoIkV4Y2VwdGlvbiB3YXMiLCBlKQogICAgICAgIHN5cy5leGl0KDEpCiAgICAgICAgCiAgICBpZiAobm90IGNoZWNrX2Zvcl9kYXRhX2ludGVncml0eSgpKToKICAgICAgICBwcmludCgiU29ycnksIHRoZSBkYXRhIHNldCBpcyBub3QgbG9hZGVkIGNvcnJlY3RseSBpbiB0aGUgcG9zdHMgY29sbGVjdGlvbiIpCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBpZiAobm90IGNoZWNrX2Zvcl9mYXN0X2Jsb2dfaG9tZV9wYWdlKCkpOgogICAgICAgIHByaW50KCJTb3JyeSwgdGhlIHF1ZXJ5IHRvIGRpc3BsYXkgdGhlIGJsb2cgaG9tZSBwYWdlIGlzIHRvbyBzbG93LiIpCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBpZiAobm90IGNoZWNrX2Zvcl9mYXN0X2Jsb2dfZW50cnlfcGFnZSgpKToKICAgICAgICBwcmludCgiU29ycnksIHRoZSBxdWVyeSB0byByZXRyaWV2ZSBhIGJsb2cgcG9zdCBieSBwZXJtYWxpbmsgaXMgdG9vIHNsb3cuIikKICAgICAgICBzeXMuZXhpdCgxKQoKICAgIGlmIChub3QgY2hlY2tfZm9yX2Zhc3RfcG9zdHNfYnlfdGFnX3BhZ2UoKSk6CiAgICAgICAgcHJpbnQoIlNvcnJ5LCB0aGUgcXVlcnkgdG8gcmV0cmlldmUgYWxsIHBvc3RzIHdpdGggYSBjZXJ0YWluIHRhZyBpcyB0b28gc2xvdyIpCiAgICAgICAgc3lzLmV4aXQoMSkKICAgIAogICAgIyBpZiB5b3UgYXJlIHJlYWRpbmcgdGhpcyBpbiBjbGVhcnRleHQsIHlvdSBhcmUgdmlvbGF0aW5nIHRoZSBob25vciBjb2RlLgogICAgIyBZb3UgY2FuIHN0aWxsIHJlZGVlbSB5b3Vyc2VsZi4gR2V0IGl0IHdvcmtpbmcgYW5kIGRvbid0IHN1Ym1pdCB0aGUgdmFsaWRhdGlvbiBjb2RlIHVudGlsIHlvdSBkby4KICAgICMgQWxsIGEgbWFuIGhhcyBhdCB0aGUgZW5kIG9mIHRoZSBkYXkgaXMgaGlzIHdvcmQuCiAgICBwcmludCgiVGVzdHMgUGFzc2VkIGZvciBIVyA0LjMuIFlvdXIgSFcgNC4zIHZhbGlkYXRpb24gY29kZSBpcyA4OTNqZm5zMjlmNzI4Zm4yOWYyMGYyIikKCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oc3lzLmFyZ3ZbMTpdKQoKCgoKCgoKCgo='
eval(compile(base64.b64decode(code), "<string>", 'exec'))
