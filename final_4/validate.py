import base64
code=b'aW1wb3J0IHB5bW9uZ28KaW1wb3J0IHVybGxpYi5yZXF1ZXN0LCB1cmxsaWIuZXJyb3IsIHVybGxpYi5wYXJzZQppbXBvcnQgdXJsbGliLnJlcXVlc3QsIHVybGxpYi5wYXJzZSwgdXJsbGliLmVycm9yCmltcG9ydCBodHRwLmNvb2tpZWphcgppbXBvcnQgcmFuZG9tCmltcG9ydCByZQppbXBvcnQgc3RyaW5nCmltcG9ydCBzeXMKaW1wb3J0IGdldG9wdAoKIyBpbml0IHRoZSBnbG9iYWwgY29va2llIGphcgpjaiA9IGh0dHAuY29va2llamFyLkNvb2tpZUphcigpCiMgZGVjbGFyZSB0aGUgdmFyaWFibGVzIHRvIGNvbm5lY3QgdG8gZGIKY29ubmVjdGlvbiA9IE5vbmUKZGIgPSBOb25lCndlYmhvc3QgPSAibG9jYWxob3N0OjgwODIiCm1vbmdvc3RyID0gIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTciCmRiX25hbWUgPSAiYmxvZyIKCiMgdGhpcyBzY3JpcHQgd2lsbCBjaGVjayB0aGF0IGhvbWV3b3JrIDMuMiBpcyBjb3JyZWN0CgojIG1ha2VzIGEgbGl0dGxlIHNhbHQKZGVmIG1ha2Vfc2FsdChuKToKICAgIHNhbHQgPSAiIgogICAgZm9yIGkgaW4gcmFuZ2Uobik6CiAgICAgICAgc2FsdCA9IHNhbHQgKyByYW5kb20uY2hvaWNlKHN0cmluZy5hc2NpaV9sZXR0ZXJzKQogICAgcmV0dXJuIHNhbHQKCgojIHRoaXMgaXMgYSB2YWxpZGF0aW9uIHNjcmlwdCB0byBtYWtlIHN1cmUgdGhlIGJsb2cgd29ya3MgY29ycmVjdGx5LgoKZGVmIGNyZWF0ZV91c2VyKHVzZXJuYW1lLCBwYXNzd29yZCk6CiAgICAKICAgIGdsb2JhbCBjagoKICAgIHRyeToKICAgICAgICBwcmludCgiVHJ5aW5nIHRvIGNyZWF0ZSBhIHRlc3QgdXNlciAiLCB1c2VybmFtZSkKICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9zaWdudXAiLmZvcm1hdCh3ZWJob3N0KQoKICAgICAgICBkYXRhID0gdXJsbGliLnBhcnNlLnVybGVuY29kZShbKCJlbWFpbCIsIiIpLCgidXNlcm5hbWUiLHVzZXJuYW1lKSwgKCJwYXNzd29yZCIscGFzc3dvcmQpLCAoInZlcmlmeSIscGFzc3dvcmQpXSkuZW5jb2RlKCJ1dGYtOCIpCiAgICAgICAgcmVxdWVzdCA9IHVybGxpYi5yZXF1ZXN0LlJlcXVlc3QodXJsPXVybCwgZGF0YT1kYXRhKQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcih1cmxsaWIucmVxdWVzdC5IVFRQQ29va2llUHJvY2Vzc29yKGNqKSkKICAgICAgICBmID0gb3BlbmVyLm9wZW4ocmVxdWVzdCkKCiAgICAgICAgdXNlcnMgPSBkYi51c2VycwogICAgICAgICMgY2hlY2sgdGhhdCB0aGUgdXNlciBpcyBpbiB1c2VycyBjb2xsZWN0aW9uCiAgICAgICAgdXNlciA9IHVzZXJzLmZpbmRfb25lKHsnX2lkJzp1c2VybmFtZX0pCiAgICAgICAgaWYgKHVzZXIgPT0gTm9uZSk6CiAgICAgICAgICAgIHByaW50KCJDb3VsZCBub3QgZmluZCB0aGUgdGVzdCB1c2VyICIsIHVzZXJuYW1lLCAiaW4gdGhlIHVzZXJzIGNvbGxlY3Rpb24uIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgcHJpbnQoIkZvdW5kIHRoZSB0ZXN0IHVzZXIgIiwgdXNlcm5hbWUsICIgaW4gdGhlIHVzZXJzIGNvbGxlY3Rpb24iKQoKICAgICAgICAjIGNoZWNrIHRoYXQgdGhlIHVzZXIgaGFzIGJlZW4gYnVpbHQKICAgICAgICByZXN1bHQgPSBmLnJlYWQoKS5kZWNvZGUoInV0Zi04IikKICAgICAgICBleHByID0gcmUuY29tcGlsZSgiV2VsY29tZVxzKyIrIHVzZXJuYW1lKQogICAgICAgIGlmIGV4cHIuc2VhcmNoKHJlc3VsdCk6CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgCiAgICAgICAgcHJpbnQoIldoZW4gd2UgdHJpZWQgdG8gY3JlYXRlIGEgdXNlciwgaGVyZSBpcyB0aGUgb3V0cHV0IHdlIGdvdFxuIikKICAgICAgICBwcmludChyZXN1bHQpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoInRoZSByZXF1ZXN0IHRvICIsIHVybCwgIiBmYWlsZWQsIHNvIHlvdXIgYmxvZyBtYXkgbm90IGJlIHJ1bm5pbmcuIikKICAgICAgICByYWlzZQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiB0cnlfdG9fbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKToKCiAgICB0cnk6CiAgICAgICAgcHJpbnQoIlRyeWluZyB0byBsb2dpbiBmb3IgdGVzdCB1c2VyICIsIHVzZXJuYW1lKQogICAgICAgIHVybCA9ICJodHRwOi8vezB9L2xvZ2luIi5mb3JtYXQod2ViaG9zdCkKCiAgICAgICAgZGF0YSA9IHVybGxpYi5wYXJzZS51cmxlbmNvZGUoWygidXNlcm5hbWUiLHVzZXJuYW1lKSwgKCJwYXNzd29yZCIscGFzc3dvcmQpXSkuZW5jb2RlKCJ1dGYtOCIpCiAgICAgICAgcmVxdWVzdCA9IHVybGxpYi5yZXF1ZXN0LlJlcXVlc3QodXJsPXVybCwgZGF0YT1kYXRhKQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcih1cmxsaWIucmVxdWVzdC5IVFRQQ29va2llUHJvY2Vzc29yKGNqKSkKICAgICAgICBmID0gb3BlbmVyLm9wZW4ocmVxdWVzdCkKCiAgICAgICAgIyBjaGVjayBmb3Igc3VjY2Vzc2Z1bCBsb2dpbgogICAgICAgIHJlc3VsdCA9IGYucmVhZCgpLmRlY29kZSgidXRmLTgiKQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKCJXZWxjb21lXHMrIisgdXNlcm5hbWUpCiAgICAgICAgaWYgZXhwci5zZWFyY2gocmVzdWx0KToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICAgICAgcHJpbnQoIldoZW4gd2UgdHJpZWQgdG8gbG9naW4sIGhlcmUgaXMgdGhlIG91dHB1dCB3ZSBnb3RcbiIpCiAgICAgICAgcHJpbnQocmVzdWx0KQogICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCJ0aGUgcmVxdWVzdCB0byAiLCB1cmwsICIgZmFpbGVkLCBzbyB5b3VyIGJsb2cgbWF5IG5vdCBiZSBydW5uaW5nLiIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIGFkZF9ibG9nX3Bvc3QodGl0bGUscG9zdCx0YWdzKToKCiAgICB0cnk6CiAgICAgICAgcHJpbnQoIlRyeWluZyB0byBzdWJtaXQgYSBwb3N0IHdpdGggdGl0bGUgIiwgdGl0bGUpCiAgICAgICAgZGF0YSA9IHVybGxpYi5wYXJzZS51cmxlbmNvZGUoWygiYm9keSIscG9zdCksICgic3ViamVjdCIsdGl0bGUpLCAoInRhZ3MiLHRhZ3MpXSkuZW5jb2RlKCJ1dGYtOCIpCiAgICAgICAgdXJsID0gImh0dHA6Ly97MH0vbmV3cG9zdCIuZm9ybWF0KHdlYmhvc3QpCiAgICAgICAgcmVxdWVzdCA9IHVybGxpYi5yZXF1ZXN0LlJlcXVlc3QodXJsPXVybCwgZGF0YT1kYXRhKQogICAgICAgIGNqLmFkZF9jb29raWVfaGVhZGVyKHJlcXVlc3QpCiAgICAgICAgb3BlbmVyID0gdXJsbGliLnJlcXVlc3QuYnVpbGRfb3BlbmVyKCkKICAgICAgICBmID0gb3BlbmVyLm9wZW4ocmVxdWVzdCkKCiAgICAgICAgIyBjaGVjayBmb3Igc3VjY2Vzc2Z1bCBsb2dpbgogICAgICAgIHJlc3VsdCA9IGYucmVhZCgpLmRlY29kZSgidXRmLTgiKQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKHRpdGxlICsgIi4rIiArIHBvc3QsIHJlLkRPVEFMTCkKCiAgICAgICAgaWYgZXhwci5zZWFyY2gocmVzdWx0KToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICAgICAgcHJpbnQoIldoZW4gd2UgdHJpZWQgdG8gcG9zdCwgaGVyZSBpcyB0aGUgb3V0cHV0IHdlIGdvdFxuIikKICAgICAgICBwcmludChyZXN1bHQpCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZXhjZXB0OgogICAgICAgIHByaW50KCJ0aGUgcmVxdWVzdCB0byAiLCB1cmwsICIgZmFpbGVkLCBzbyB5b3VyIGJsb2cgbWF5IG5vdCBiZSBydW5uaW5nLiIpCiAgICAgICAgcmFpc2UKCiAgICAgICAgcmV0dXJuIEZhbHNlCgpkZWYgYWRkX2Jsb2dfY29tbWVudCh0aXRsZSxwb3N0KToKCiAgICB0cnk6CiAgICAgICAgcHJpbnQoIitUcnlpbmcgdG8gc3VibWl0IGEgYmxvZyBjb21tZW50IGZvciBwb3N0IHdpdGggdGl0bGUiLCB0aXRsZSkKICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9uZXdjb21tZW50Ii5mb3JtYXQod2ViaG9zdCkKICAgICAgICAKICAgICAgICBkb2MgPSB7fQogICAgICAgIGNoZWNrX21vbmdvX2Zvcl9wb3N0KHRpdGxlLCBwb3N0LCBkb2MpCgogICAgICAgIHBlcm1hbGluayA9IGRvY1snZG9jJ11bJ3Blcm1hbGluayddCgogICAgICAgIGNvbW1lbnRfbmFtZSA9IG1ha2Vfc2FsdCgxMikKICAgICAgICBjb21tZW50X2JvZHkgPSBtYWtlX3NhbHQoMTIpCgogICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKFsoImNvbW1lbnROYW1lIixjb21tZW50X25hbWUpLCAoImNvbW1lbnRCb2R5Iixjb21tZW50X2JvZHkpLCAoInBlcm1hbGluayIscGVybWFsaW5rKV0pLmVuY29kZSgidXRmLTgiKQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KHVybD11cmwsIGRhdGE9ZGF0YSkKICAgICAgICBjai5hZGRfY29va2llX2hlYWRlcihyZXF1ZXN0KQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcigpCiAgICAgICAgZiA9IG9wZW5lci5vcGVuKHJlcXVlc3QpCgogICAgICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgYWRkaXRpb24gb2YgY29tbWVudCBvbiBwYWdlCiAgICAgICAgcmVzdWx0ID0gZi5yZWFkKCkuZGVjb2RlKCJ1dGYtOCIpCiAgICAgICAgZXhwciA9IHJlLmNvbXBpbGUodGl0bGUgKyAiLisiICsgcG9zdCwgcmUuRE9UQUxMKQoKICAgICAgICBpZiBub3QgZXhwci5zZWFyY2gocmVzdWx0KToKICAgICAgICAgICAgcHJpbnQoIldoZW4gd2UgdHJpZWQgdG8gZmluZCB0aGUgY29tbWVudCB3ZSBwb3N0ZWQgYXQgdGhlICAiLCB1cmwsICIgaGVyZSBpcyB3aGF0IHdlIGdvdCIpCiAgICAgICAgICAgIHByaW50KHJlc3VsdCkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgoKICAgICAgICAjIGNoZWNrIGZvciBzdWNjZXNzZnVsIGFkZGl0aW9uIG9mIGNvbW1lbnQuLnJldHJpZXZlIHRoZSBkb2MgYWdhaW4KICAgICAgICBpZihub3QgY2hlY2tfbW9uZ29fZm9yX3Bvc3QodGl0bGUsIHBvc3QsIGRvYykpOgogICAgICAgICAgICBwcmludCgiQ291bGQgbm90IGZpbmQgY29tbWVudCBpbiBkYXRhYmFzZSIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIGZvdW5kID0gRmFsc2UKICAgICAgICBpZiAoJ2NvbW1lbnRzJyBpbiBkb2NbJ2RvYyddKToKICAgICAgICAgICAgZm9yIGNvbW1lbnQgaW4gZG9jWydkb2MnXVsnY29tbWVudHMnXToKICAgICAgICAgICAgICAgIGlmIChjb21tZW50Wydib2R5J10gPT0gY29tbWVudF9ib2R5IGFuZCBjb21tZW50WydhdXRob3InXSA9PSBjb21tZW50X25hbWUpOgogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gVHJ1ZQoKICAgICAgICByZXR1cm4gZm91bmQKCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoInRoZSByZXF1ZXN0IHRvICIsIHVybCwgIiBmYWlsZWQsIHNvIHlvdXIgYmxvZyBtYXkgbm90IGJlIHJ1bm5pbmcuIikKICAgICAgICByYWlzZQoKICAgICAgICByZXR1cm4gRmFsc2UKCgojIGZldGNoIHRoZSBibG9nIGhvbWUgcGFnZSBhbmQgcmV0dXJuIHRoZSBsaW5rIG9mIHRoZSBmaXJzdCBwb3N0CmRlZiBmZXRjaF9ibG9nX2hvbWVfcGFnZShwb3N0cyk6CgogICAgdHJ5OgogICAgICAgIHVybCA9ICJodHRwOi8vezB9LyIuZm9ybWF0KHdlYmhvc3QpCiAgICAgICAgcHJpbnQoIlRyeWluZyB0byBncmFiIHRoZSBibG9nIGhvbWUgcGFnZSBhdCB1cmwgYW5kIGZpbmQgdGhlIGZpcnN0IHBvc3QuIiwgdXJsKQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KHVybD11cmwpCiAgICAgICAgY2ouYWRkX2Nvb2tpZV9oZWFkZXIocmVxdWVzdCkKICAgICAgICBvcGVuZXIgPSB1cmxsaWIucmVxdWVzdC5idWlsZF9vcGVuZXIoKQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQoKICAgICAgICAjIExvb2sgZm9yIGEgcG9zdAogICAgICAgIHJlc3VsdCA9IGYucmVhZCgpLmRlY29kZSgidXRmLTgiKQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKCI8YSBocmVmPVwiKFteXCJdKylcIlx3Kj8+IiwgcmUuRE9UQUxMKQoKCiAgICAgICAgbWF0Y2ggPSBleHByLnNlYXJjaChyZXN1bHQpCgogICAgICAgIGlmIG1hdGNoIGlzIG5vdCBOb25lOgogICAgICAgICAgICBwcmludCgiRm91bmQgYSBwb3N0IHVybDogIiwgbWF0Y2guZ3JvdXAoMSkpCiAgICAgICAgICAgIHBvc3RzLmFwcGVuZChtYXRjaC5ncm91cCgxKSkKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICAgICAgCiAgICAgICAgcHJpbnQoIkhtbSwgY2FuJ3Qgc2VlbSB0byBmaW5kIGEgcG9zdC4gSXMgdGhlIGJsb2cgcG9wdWxhdGVkIHdpdGggcG9zdHM/IikKICAgICAgICBwcmludCgiV2hlbiB3ZSB0cmllZCB0byByZWFkIHRoZSBibG9nIGluZGV4IGF0ICIsIHVybCwgIiBoZXJlIGlzIHdoYXQgd2UgZ290IikKICAgICAgICBwcmludChyZXN1bHQpCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZXhjZXB0OgogICAgICAgIHByaW50KCJ0aGUgcmVxdWVzdCB0byAiLCB1cmwsICIgZmFpbGVkLCBzbyB5b3VyIGJsb2cgbWF5IG5vdCBiZSBydW5uaW5nLiIpCiAgICAgICAgcmFpc2UKCiAgICAgICAgcmV0dXJuIEZhbHNlCgojIGdldHMgdGhlIGxpa2VzIHZhbHVlIG9mZiB0aGUgZmlyc3QgY29tbW1lbnQgb3IgcmV0dXJucyBOb25lCmRlZiBmZXRjaF9saWtlcyh1cmwpOgoKICAgIHRyeToKICAgICAgICB1cmwgPSAiaHR0cDovL3swfXsxfSIuZm9ybWF0KHdlYmhvc3QsIHVybCkKICAgICAgICBwcmludCgiVHJ5aW5nIHRvIGdyYWIgdGhlIG51bWJlciBvZiBsaWtlcyBmb3IgdXJsICIsIHVybCkKICAgICAgICByZXF1ZXN0ID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCh1cmw9dXJsKQogICAgICAgIGNqLmFkZF9jb29raWVfaGVhZGVyKHJlcXVlc3QpCiAgICAgICAgb3BlbmVyID0gdXJsbGliLnJlcXVlc3QuYnVpbGRfb3BlbmVyKCkKICAgICAgICBmID0gb3BlbmVyLm9wZW4ocmVxdWVzdCkKCgogICAgICAgICMgbGV0J3MgZ2V0IHRoZSBmaXJzdCBmb3JtIGVsZW1lbnQKICAgICAgICByZXN1bHQgPSBmLnJlYWQoKS5kZWNvZGUoInV0Zi04IikKICAgICAgICBleHByID0gcmUuY29tcGlsZSgiPGZvcm1bXj5dKj4uKj9MaWtlczpccyooXGQrKVxzKjwuKj88L2Zvcm0+IiwgcmUuRE9UQUxMKQoKICAgICAgICBtYXRjaCA9IGV4cHIuc2VhcmNoKHJlc3VsdCkKCiAgICAgICAgaWYgbWF0Y2ggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHByaW50KCJMaWtlcyB2YWx1ZSAiLCBtYXRjaC5ncm91cCgxKSkKICAgICAgICAgICAgcmV0dXJuIGludChtYXRjaC5ncm91cCgxKSkKCiAgICAgICAgcHJpbnQoIkNhbid0IGZldGNoIHRoZSBsaWtlIHZhbHVlIGZvciB0aGUgZmlyc3QgY29tbWVudC4gUGVyaGFwcyB0aGUgYmxvZyBlbnRyeSBoYXMgbm8gY29tbWVudHM/IikKICAgICAgICBwcmludCgiV2hlbiB3ZSB0cmllZCB0byByZWFkIHRoZSBibG9nIHBlcm1hbGluayBhdCAiLCB1cmwsICIgaGVyZSBpcyB3aGF0IHdlIGdvdCIpCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoInRoZSByZXF1ZXN0IHRvICIsIHVybCwgIiBmYWlsZWQsIHNvIHlvdXIgYmxvZyBtYXkgbm90IGJlIHJ1bm5pbmcuIikKICAgICAgICByYWlzZQoKICAgICAgICByZXR1cm4gTm9uZQoKCiMgZ2V0cyB0aGUgbGlrZXMgdmFsdWUgb2ZmIHRoZSBmaXJzdCBjb21tbWVudCBvciByZXR1cm5zIE5vbmUKZGVmIGNsaWNrX29uX2xpa2UocGVybWFsaW5rKToKCiAgICBwcmludCgiQ2xpY2tpbmcgb24gTGlrZSBsaW5rIGZvciBwb3N0OiAiLCBwZXJtYWxpbmspCiAgICB0cnk6CiAgICAgICAgZXhwciA9ICByZS5jb21waWxlKCJbXi9dKy8oW14vXSspIikKICAgICAgICBtYXRjaCA9IGV4cHIuc2VhcmNoKHBlcm1hbGluaykKICAgICAgICBpZiBtYXRjaCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgcGVybWFsaW5rID0gbWF0Y2guZ3JvdXAoMSkKICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9saWtlIi5mb3JtYXQod2ViaG9zdCkKICAgICAgICAjIHByaW50ICJMaWtlIFBPU1QgdXJsIiwgdXJsCgogICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKFsoInBlcm1hbGluayIscGVybWFsaW5rKSwgKCJjb21tZW50X29yZGluYWwiLCIwIildKS5lbmNvZGUoInV0Zi04IikKICAgICAgICByZXF1ZXN0ID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCh1cmw9dXJsLCBkYXRhPWRhdGEpCiAgICAgICAgY2ouYWRkX2Nvb2tpZV9oZWFkZXIocmVxdWVzdCkKICAgICAgICBvcGVuZXIgPSB1cmxsaWIucmVxdWVzdC5idWlsZF9vcGVuZXIoKQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCgidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iKQogICAgICAgIHJhaXNlCgoKCgojIGNvbW1hbmQgbGluZSBhcmcgcGFyc2luZyB0byBtYWtlIGZvbGtzIGhhcHB5IHdobyB3YW50IHRvIHJ1biBhdCBtb25nb2xhYnMgb3IgbW9uZ29ocQojIHRoaXMgZnVuY3Rpb25zIHVzZXMgZ2xvYmFsIHZhcnMgdG8gY29tbXVuaWNhdGUuIGZvcmdpdmUgbWUuCmRlZiBhcmdfcGFyc2luZyhhcmd2KToKCiAgICBnbG9iYWwgd2ViaG9zdAogICAgZ2xvYmFsIG1vbmdvc3RyCiAgICBnbG9iYWwgZGJfbmFtZQoKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChhcmd2LCAiLXA6LW06LWQ6IikKICAgIGV4Y2VwdCBnZXRvcHQuR2V0b3B0RXJyb3I6CiAgICAgICAgcHJpbnQoInVzYWdlIHZhbGlkYXRlLnB5IC1wIHdlYmhvc3QgLW0gbW9uZ29Db25uZWN0U3RyaW5nIC1kIGRhdGFiYXNlTmFtZSIpCiAgICAgICAgcHJpbnQoIlx0d2ViaG9zdCBkZWZhdWx0cyB0byB7MH0iLmZvcm1hdCh3ZWJob3N0KSkKICAgICAgICBwcmludCgiXHRtb25nb0Nvbm5lY3Rpb25TdHJpbmcgZGVmYXVsdCB0byB7MH0iLmZvcm1hdChtb25nb3N0cikpCiAgICAgICAgcHJpbnQoIlx0ZGF0YWJhc2VOYW1lIGRlZmF1bHRzIHRvIHswfSIuZm9ybWF0KGRiX25hbWUpKQogICAgICAgIHN5cy5leGl0KDIpCiAgICBmb3Igb3B0LCBhcmcgaW4gb3B0czoKICAgICAgICBpZiAob3B0ID09ICctaCcpOgogICAgICAgICAgICBwcmludCgidXNhZ2UgdmFsaWRhdGUucHkgLXAgd2ViaG9zdCAtbSBtb25nb0Nvbm5lY3RTdHJpbmcgLWQgZGF0YWJhc2VOYW1lIikKICAgICAgICAgICAgc3lzLmV4aXQoMikKICAgICAgICBlbGlmIG9wdCBpbiAoIi1wIik6CiAgICAgICAgICAgIHdlYmhvc3QgPSBhcmcKICAgICAgICAgICAgcHJpbnQoIk92ZXJyaWRpbmcgSFRUUCBob3N0IHRvIGJlICIsIHdlYmhvc3QpCiAgICAgICAgZWxpZiBvcHQgaW4gKCItbSIpOgogICAgICAgICAgICBtb25nb3N0ciA9IGFyZwogICAgICAgICAgICBwcmludCgiT3ZlcnJpZGluZyBNb25nb0RCIGNvbm5lY3Rpb24gc3RyaW5nIHRvIGJlICIsIG1vbmdvc3RyKQogICAgICAgIGVsaWYgb3B0IGluICgiLWQiKToKICAgICAgICAgICAgZGJfbmFtZSA9IGFyZwogICAgICAgICAgICBwcmludCgiT3ZlcnJpZGluZyBNb25nb0RCIGRhdGFiYXNlIHRvIGJlICIsIGRiX25hbWUpCiAgICAgICAgICAgIAoKCiMgbWFpbiBzZWN0aW9uIG9mIHRoZSBjb2RlCmRlZiBtYWluKGFyZ3YpOgogICAgICAgICAgICAKICAgIGFyZ19wYXJzaW5nKGFyZ3YpCiAgICBnbG9iYWwgY29ubmVjdGlvbgogICAgZ2xvYmFsIGRiCgogICAgcHJpbnQoIldlbGNvbWUgdG8gdGhlIE0xMDEgRmluYWwgRXhhbSwgUXVlc3Rpb24gNCBWYWxpZGF0aW9uIENoZWNrZXIiKQoKICAgICMgY29ubmVjdCB0byB0aGUgZGIgKG1vbmdvc3RyIHdhcyBzZXQgaW4gYXJnX3BhcnNpbmcpCiAgICBjb25uZWN0aW9uID0gcHltb25nby5Nb25nb0NsaWVudChtb25nb3N0cikKICAgIGRiID0gY29ubmVjdGlvbltkYl9uYW1lXQoKCiAgICAjIGdyYWIgdGhlIGJsb2cgaG9tZSBwYWdlIGFuZCBmaW5kIHRoZSBmaXJzdCBwb3N0CiAgICBwb3N0cyA9IFtdCiAgICBpZiAobm90IGZldGNoX2Jsb2dfaG9tZV9wYWdlKHBvc3RzKSk6CiAgICAgICAgcHJpbnQoIkkgY2FuJ3QgZ3JhYiB0aGUgaG9tZSBwYWdlIG9mIHRoZSBibG9nIikKICAgICAgICBzeXMuZXhpdCgxKQoKICAgICMgbm93IGdvIHRvIHRoZSBwZXJtYWxpbmsgcGFnZSBmb3IgdGhhdCBwb3N0CiAgICBsaWtlc192YWx1ZSA9IGZldGNoX2xpa2VzKHBvc3RzWzBdKQoKICAgIGlmIChsaWtlc192YWx1ZSBpcyAgTm9uZSk6CiAgICAgICAgcHJpbnQoIkNhbid0IGZldGNoIHRoZSBsaWtlIHZhbHVlIikKICAgICAgICBzeXMuZXhpdCgxKQoKICAgIGNsaWNrX29uX2xpa2UocG9zdHNbMF0pCgogICAgbmV3X2xpa2VzX3ZhbHVlID0gZmV0Y2hfbGlrZXMocG9zdHNbMF0pCgogICAgaWYgKG5ld19saWtlc192YWx1ZSAhPSAobGlrZXNfdmFsdWUgKyAxKSk6CiAgICAgICAgcHJpbnQoIkkgd2FzIG5vdCBhYmxlIHRvIGluY3JlbWVudCB0aGUgbGlrZXMgb24gYSBjb21tZW50IikKICAgICAgICBwcmludCgib2xkIGxpa2VzIHZhbHVlIHdhcyAiLCBsaWtlc192YWx1ZSkKICAgICAgICBwcmludCgibGlrZXMgdmFsdWUgYWZ0ZXIgSSBjbGlja2VkIHdhcyAiLCBuZXdfbGlrZXNfdmFsdWUpCiAgICAgICAgcHJpbnQoIlNvcnJ5LCB5b3UgaGF2ZSBub3Qgc29sdmVkIGl0IHlldC4iKQogICAgICAgIHN5cy5leGl0KDEpCgoKICAgIHByaW50KCJUZXN0cyBQYXNzZWQgZm9yIEZpbmFsIDQuIFlvdXIgdmFsaWRhdGlvbiBjb2RlIGlzIDNmODM3aGhnNjczZ2hkOTNoZ2Y4IikKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbihzeXMuYXJndlsxOl0pCgo='
eval(compile(base64.b64decode(code), "<string>", 'exec'))
